# Notify-AzDefenderAlertIPEntity-GreyNoiseCommunity
author: Nathan Swift

This playbook uses the GreyNoise Community API to notify a security operations team and enrich alert email notification generated by Azure Defender for IP addresses. Optionally to prevent rate limits you may want to obtain a valid GreyNoise API Key. To learn more about the service and request a trial key, see the [Setting up an Account](https://developer.greynoise.io/docs/setting-up-an-account). 

For details around the API used see the [Community API documentation](https://developer.greynoise.io/reference/community-api#get_v3-community-ip).

[![Deploy to Azure](https://aka.ms/deploytoazurebutton)](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2FAzure-Security-Center%2Fmaster%2FWorkflow%2520automation%2FNotify-AzDefenderAlertIPEntity-GreyNoiseCommunity%2Fazuredeploy.json)
[![Deploy to Azure Gov](https://aka.ms/deploytoazuregovbutton)](https://portal.azure.us/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2FAzure-Security-Center%2Fmaster%2FWorkflow%2520automation%2FNotify-AzDefenderAlertIPEntity-GreyNoiseCommunity%2Fazuredeploy.json)

**Additional Post Install Notes:**

Authorize the APIs deployed into the ResourceGroup.

## Initial Setup

Logic App can be ran manually in the Azure Defender alert - trigger or can be used with workflow automation.

## (Optional) Manually update Logic App with GreyNoise API Key

To prevent rate limits you may want to obtain a valid GreyNoise API Key. Open the Logic App and Edit. Within the UI editor go to Parameters button towards top and add the key ass a default value as shown below. In addition open the CommunityIP action and add Key and the Parameter GreyNoiseKey.

![apikey](Images/apikey.png)